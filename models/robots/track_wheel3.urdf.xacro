<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  
  <!-- Properties (Constants) -->
  <xacro:property name="M_PI" value="3.14159" />
  <xacro:property name="wheel_offset_z" value="-0.112" />  
  
  <xacro:macro name="tracked_wheel3" params="parent prefix offset_x offset_y offset_z reflect radius height mass">
    
    <joint name="${prefix}_wheel_joint" type="continuous">
        <origin xyz="${offset_x } ${offset_y * reflect} ${offset_z}" rpy="0 0 0" />
        <parent link="${parent}" />
        <child link="${prefix}_wheel_link" />
        <axis xyz="0 1 0" />
        <limit effort="100" velocity="100" />
        <joint_properties damping="0.0" friction="0.0" />
        <anchor xyz="0 0 0" />
    </joint>    
    
    <link name="${prefix}_wheel_link">
        <inertial>
            <mass value="${mass}" />
            <origin xyz="0 0 0" rpy="${-M_PI/2} 0 0" />
            <inertia    ixx="0.00012411765597" ixy="0.0" ixz="0.0"
                        iyy="0.00015218160428" iyz="0.0"
                        izz="0.00011763977943" />
        </inertial>        
        <collision>
            <origin xyz="0 0 0" rpy="${-M_PI/2} 0 0" />
            <geometry>
                <cylinder radius="${radius}" length="${wheel_size_y}" />
            </geometry>
        </collision>
        <visual>
            <origin xyz="0 0 0" rpy="${-M_PI/2} 0 0" />
            <geometry>
                <cylinder radius="${radius}" length="${wheel_size_y}" />
            </geometry>
            <Green />
        </visual>
    </link>
    
        <!-- 
    <transmission name="${prefix}_wheel_trans">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${prefix}_wheel_joint">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
        </joint>
        <actuator name="${prefix}_motor_link">
            <mechanicalReduction>1</mechanicalReduction>
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
        </actuator>
    </transmission>
       -->
    </xacro:macro>

</robot>
